<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Mein Konto</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="../res/css/styles.css" />

  <script>window.accessRules = { requireLogin: true, requireAdmin: false };</script>
  <script src="../js/navbar.js" defer></script>
  <script src="../js/account.js" defer></script>
  <script src="../js/main.js" defer></script>
  <script src="../js/footer.js" defer></script>
</head>

<body class="d-flex flex-column min-vh-100">
  <!-- Navbar wird durch JS geladen -->

  <main class="container my-5 flex-grow-1">
    <h2 class="mb-4">Mein Konto</h2>

    <!-- Account-Card -->
    <div class="card shadow p-4">
      <div class="card-body">
        <h5 class="card-title">Deine Informationen</h5>
        <p><strong>Anrede:</strong> <span id="anzeigeAnrede">-</span></p>
        <p><strong>Vorname:</strong> <span id="anzeigeVorname">-</span></p>
        <p><strong>Nachname:</strong> <span id="anzeigeNachname">-</span></p>
        <p><strong>Adresse:</strong> <span id="anzeigeAdresse">-</span></p>
        <p><strong>PLZ:</strong> <span id="anzeigePLZ">-</span></p>
        <p><strong>Ort:</strong> <span id="anzeigeOrt">-</span></p>
        <p><strong>Zahlungsinfo:</strong> <span id="anzeigeZahlung">-</span></p>

        <button type="button" class="btn btn-primary mt-4" data-bs-toggle="modal" data-bs-target="#editModal">
          Daten 채ndern
        </button>
      </div>
    </div>

    <!-- Statusmeldung -->
    <div id="updateMessage" class="mt-3"></div>
  </main>

  <!-- Modal (Adresse / Zahlung / Passwort 채ndern) -->
  <div class="modal fade" id="editModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Daten 채ndern</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <ul class="nav nav-tabs" id="tabSelector" role="tablist">
            <li class="nav-item">
              <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#adresseTab">Adresse</button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#zahlungTab">Zahlung</button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#passwortTab">Passwort</button>
            </li>
          </ul>

          <div class="tab-content pt-3">
            <!-- Adresse 채ndern -->
            <div class="tab-pane fade show active" id="adresseTab">
              <form id="adresseForm">
                <div class="row g-2">
                  <div class="col-md-3">
                    <label class="form-label">Anrede</label>
                    <input name="anrede" class="form-control">
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">Vorname</label>
                    <input name="vorname" class="form-control">
                  </div>
                  <div class="col-md-5">
                    <label class="form-label">Nachname</label>
                    <input name="nachname" class="form-control">
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Adresse</label>
                    <input name="adresse" class="form-control">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">PLZ</label>
                    <input name="plz" class="form-control">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">Ort</label>
                    <input name="ort" class="form-control">
                  </div>
                  <div class="col-12 mt-2">
                    <label class="form-label">Passwort zur
